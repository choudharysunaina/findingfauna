import{r,j as a,m as R}from"./index-DTA16jq8.js";const N=({src:d,alt:f,className:I="",sizes:b="100vw",priority:o=!1,placeholder:x="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjNmNGY2Ii8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5YWFhYSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkxvYWRpbmcuLi48L3RleHQ+PC9zdmc+",fallbackSrc:l,onLoad:c,onError:u})=>{const h=()=>{const s="/findingfauna/";return s.endsWith("/")?s.slice(0,-1):s},e=s=>{if(s.startsWith("http")||s.startsWith("data:")||s.startsWith("//"))return s;const v=h();return s.startsWith(v)?s:s.startsWith("/")?`${v}${s}`:s},m=e(d),W=l?e(l):void 0,[i,w]=r.useState(!1),[t,n]=r.useState(!1),[j,p]=r.useState(!1),P=r.useRef(null),g=r.useRef(null);r.useEffect(()=>{if(p(!0),o){p(!0);return}return()=>{g.current&&g.current.disconnect()}},[o]);const z=()=>{w(!0),c==null||c()},Z=()=>{n(!0),u==null||u()},y=t&&W?W:m;return a.jsxs("div",{className:`relative overflow-hidden ${I}`,children:[!i&&a.jsx("div",{className:"absolute inset-0 bg-gray-100 animate-pulse flex items-center justify-center",children:a.jsx("div",{className:"text-gray-400 text-sm",children:"Loading..."})}),a.jsx(R.img,{ref:P,src:y,alt:f,className:`w-full h-full object-cover transition-opacity duration-300 ${i?"opacity-100":"opacity-0"}`,loading:o?"eager":"lazy",sizes:b,onLoad:z,onError:Z,initial:{opacity:0,scale:1.05},animate:{opacity:i?1:0,scale:i?1:1.05},transition:{duration:.3}})]})},B=({src:d,alt:f,className:I="",sizes:b="(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw",priority:o=!1,fallbackSrc:x,onLoad:l,onError:c})=>{const u=()=>{const t="/findingfauna/";return t.endsWith("/")?t.slice(0,-1):t},h=t=>{if(t.startsWith("http")||t.startsWith("data:")||t.startsWith("//"))return t;const n=u();return t.startsWith(n)?t:t.startsWith("/")?`${n}${t}`:t},e=h(d),m=x?h(x):void 0,i=(t=>{const n=t.lastIndexOf(".");if(n===-1)return t;const j=t.substring(0,n),p=t.substring(n);return[".jpg",".jpeg",".png"].includes(p.toLowerCase())?`${j}.webp`:t})(e),w=typeof window<"u"&&"WebP"in window;return a.jsxs("picture",{children:[w&&i!==d&&a.jsx("source",{src:i,type:"image/webp"}),a.jsx("source",{src:e,type:e.endsWith(".jpg")||e.endsWith(".jpeg")?"image/jpeg":"image/png"}),a.jsx(N,{src:e,alt:f,className:I,sizes:b,priority:o,fallbackSrc:m,onLoad:l,onError:c})]})};export{B as R};
