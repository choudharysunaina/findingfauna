import{r as a,j as s,m as y}from"./index-Cce-usJJ.js";const R=({src:d,alt:I,className:f="",sizes:h="100vw",priority:i=!1,placeholder:x="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjNmNGY2Ii8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5YWFhYSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkxvYWRpbmcuLi48L3RleHQ+PC9zdmc+",fallbackSrc:u,onLoad:r,onError:c})=>{const m=()=>"/findingfauna/",t=l=>l.startsWith("/")&&!l.startsWith("//")&&!l.startsWith("http")?`${m()}${l.slice(1)}`:l,g=t(d),b=u?t(u):void 0,[n,w]=a.useState(!1),[e,o]=a.useState(!1),[j,p]=a.useState(!1),v=a.useRef(null),W=a.useRef(null);a.useEffect(()=>{if(p(!0),i){p(!0);return}return()=>{W.current&&W.current.disconnect()}},[i]);const P=()=>{w(!0),r==null||r()},z=()=>{o(!0),c==null||c()},Z=e&&b?b:g;return s.jsxs("div",{className:`relative overflow-hidden ${f}`,children:[!n&&s.jsx("div",{className:"absolute inset-0 bg-gray-100 animate-pulse flex items-center justify-center",children:s.jsx("div",{className:"text-gray-400 text-sm",children:"Loading..."})}),s.jsx(y.img,{ref:v,src:Z,alt:I,className:`w-full h-full object-cover transition-opacity duration-300 ${n?"opacity-100":"opacity-0"}`,loading:i?"eager":"lazy",sizes:h,onLoad:P,onError:z,initial:{opacity:0,scale:1.05},animate:{opacity:n?1:0,scale:n?1:1.05},transition:{duration:.3}})]})},S=({src:d,alt:I,className:f="",sizes:h="(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw",priority:i=!1,fallbackSrc:x,onLoad:u,onError:r})=>{const c=()=>"/findingfauna/",m=e=>e.startsWith("/")&&!e.startsWith("//")?`${c()}${e.slice(1)}`:e,t=m(d),g=x?m(x):void 0,n=(e=>{const o=e.lastIndexOf(".");if(o===-1)return e;const j=e.substring(0,o),p=e.substring(o);return[".jpg",".jpeg",".png"].includes(p.toLowerCase())?`${j}.webp`:e})(t),w=typeof window<"u"&&"WebP"in window;return s.jsxs("picture",{children:[w&&n!==d&&s.jsx("source",{src:n,type:"image/webp"}),s.jsx("source",{src:t,type:t.endsWith(".jpg")||t.endsWith(".jpeg")?"image/jpeg":"image/png"}),s.jsx(R,{src:t,alt:I,className:f,sizes:h,priority:i,fallbackSrc:g,onLoad:u,onError:r})]})};export{S as R};
